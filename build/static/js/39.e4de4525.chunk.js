(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1170:function(e,t,a){"use strict";a.r(t);var n=a(39),c=a(0),r=a.n(c),s=a(854),l=a.n(s)()("http://192.168.10.104:3701",{transports:["websocket","polling","flashsocket"]}),o=a(40),i=a.n(o),u=a(175),m=a(389),d=a(31),E=a(60),f=a.n(E),h=a(270),g=a.n(h),p=a(392),b=a(1136),N=a(151),v=a(1140),I=a(565),O=a(1130),S=a(551),C=a(1152),A=a(201),y=a(253),j=a(252),k=a(287),_=a(217),T=a(482),D=a(645),w=a(486),L=a(496),M=a(156),P=a(275),G=a(276),R=a(322),U=a(504),x=a(264),z=a(265),H=a(173),F=a.n(H),B=a(49),J={CONNECT:"CONNECT",DISCONNECT:"disconnect",AUTHORIZATION:"AUTHORIZATION",SET_LANGUAGE:"SET_LANGUAGE",NEW_MESSAGE:"NEW_MESSAGE",UPDATE_MESSAGE:"UPDATE_MESSAGE",ADD_PARTICIPANT:"ADD_PARTICIPANT",GET_PREVIOUS_MESSAGES:"GET_PREVIOUS_MESSAGES",JOIN_ROOM:"JOIN_ROOM",JOIN_GLOBAL_ROOM:"JOIN_GLOBAL_ROOM",GLOBAL_ROOM_NOTIFICATION:"GLOBAL_ROOM_NOTIFICATION",MESSAGES_DELIVERED:"MESSAGES_DELIVERED",MESSAGES_SEEN:"MESSAGES_SEEN",MESSAGES_DELETE:"MESSAGES_DELETE",BLOCK_CHAT:"BLOCK_CHAT",UNBLOCK_CHAT:"UNBLOCK_CHAT"},V=a(11),K=a(57),W=function(e,t,a){console.log(e,t),t.success&&a.updateChatParticipants({chatId:t.chatId,data:t.data})},Z=function(e,t,a){console.log(e,t),t.success?(W(e,t,a),a.updateSelectChat(t.data)):console.log(e,t.error)},Y=function(e,t,a){console.log(e,t),a.playNotificationSound(t),a.saveNewMessage(t)};function q(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F()().utc();e.emit(J.GET_PREVIOUS_MESSAGES,{chatId:t,dateTime:a})}function Q(e){var t=e.socket,a=e.chatId,n=e.message,c=e.messageId,r=e.documentId;t.emit(J.NEW_MESSAGE,{chatId:a,message:n,messageId:c,documentId:r})}var X=a(12),$=a(54),ee=a(885),te=a.n(ee),ae=a(1125),ne=function(e){var t=e.store,a=e.handleUserSidebarRight,s=e.handleSidebar,l=(e.userSidebarLeft,e.socket),o=t.muteChatNotification,E=t.uploadDocument,h=t.unmuteChatNotification,H=t.mutedNotificationIds,V=t.selectedChat,K=t.newMessage,W=t.isEndOfMessages,Z=t.documentList,Y=t.cancelDocumentUpload,ee=t.updateDocumentProgress,ne=t.user,ce=t.messages,re=t.messagesLoading,se=t.setPreviousMessagesLoading,le=Object(c.useRef)(null),oe=Object(c.useState)(""),ie=Object(n.a)(oe,2),ue=ie[0],me=ie[1],de=Object(c.useState)(null),Ee=Object(n.a)(de,2),fe=Ee[0],he=Ee[1],ge=Object(c.useState)(!1),pe=Object(n.a)(ge,2),be=pe[0],Ne=pe[1],ve=Object(c.useState)(!1),Ie=Object(n.a)(ve,2),Oe=Ie[0],Se=Ie[1],Ce=Object(c.useState)(!1),Ae=Object(n.a)(Ce,2),ye=Ae[0],je=Ae[1],ke=Object(c.useState)(""),_e=Object(n.a)(ke,2),Te=_e[0],De=_e[1];Object(c.useEffect)(function(){De("")},[V]);var we=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i.a.findDOMNode(le.current).scrollTo({top:Number.MAX_SAFE_INTEGER,behavior:e?"smooth":"auto"})};Object(c.useEffect)(function(){he(null)},[V]),Object(c.useEffect)(function(){Object.keys(V).length>0&&!fe&&we(),fe&&function(){if(fe){var e=document.getElementById(fe);e&&e.scrollIntoView()}}()},[ce]);var Le=function(e){if(Oe&&Se(!1),e.preventDefault(),ue.length){var t={content:ue,messageId:Object(B.v4)(),createdAt:F()(),user:ne};he(t.messageId),Q({socket:l,chatId:V.chatId,message:ue,messageId:t.messageId}),K(t),me("")}},Me=Object.keys(V).length>0?g.a:"div",Pe=function(e){E({chatId:V.chatId,file:e,callback:function(e){var t=e.progress,a=e.documentId;return ee({progress:t,documentId:a})}})},Ge=Object(ae.a)({onDrop:function(e){je(!1);var t=0;e.forEach(function(e){console.log("DROPZONE FILE",e),t<5&&Pe(e),t++})}}),Re=Ge.getRootProps,Ue=Ge.getInputProps;Ge.isDragActive;return r.a.createElement("div",{className:"chat-app-window"},r.a.createElement("div",{className:f()("start-chat-area",{"d-none":Object.keys(V).length})},r.a.createElement("div",{className:"start-chat-icon mb-1"},r.a.createElement(b.a,null))),r.a.createElement("div",Object.assign({className:"bg-gradient-primary ".concat(ye?"chat-dropzone visible":"chat-dropzone")},Re({onClick:function(e){return e.stopPropagation()}}),{onDragLeave:function(e){return function(e){console.log("RELEASE",e),je(!1)}(e)}}),r.a.createElement("input",Ue()),r.a.createElement(N.a,{className:"icon",width:50,height:50})),Object.keys(V).length&&r.a.createElement("div",{className:f()("active-chat",{"d-none":null===V}),onDragEnter:function(e){return function(e){console.log("DRAG",e),je(!0)}(e)}},r.a.createElement("div",{className:"chat-navbar"},r.a.createElement("header",{className:"chat-header"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("div",{className:"sidebar-toggle d-block d-lg-none mr-1",onClick:s},r.a.createElement(v.a,{size:21})),r.a.createElement(u.a,{imgHeight:"36",imgWidth:"36",img:Object(X.p)("group"==V.type?V.groupPicture||null:V.chatParticipants.find(function(e){return e.user.userId!=ne.userId}).user.profilePicture),className:"avatar-border user-profile-toggle m-0 mr-1",onClick:a}),r.a.createElement("h6",{className:"mb-0",onClick:a},"group"==V.type?V.groupName:V.chatParticipants.find(function(e){return e.user.userId!=ne.userId}).user.name)),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("div",{className:"d-none d-md-block"},r.a.createElement(y.a,{className:"input-group-merge "},r.a.createElement(j.a,{placeholder:"Search here",value:Te,onChange:function(e){return De(e.target.value)}}),r.a.createElement(k.a,{addonType:"append"},r.a.createElement(_.a,null,!Te&&r.a.createElement(I.a,{size:14}),Te&&r.a.createElement(O.a,{size:14,onClick:function(){return De("")}}))))),r.a.createElement(T.a,null,r.a.createElement(D.a,{className:"btn-icon",color:"transparent",size:"sm"},r.a.createElement(S.a,{size:"18"})),r.a.createElement(w.a,{right:!0},r.a.createElement(L.a,{href:"/",onClick:function(e){e.preventDefault(),a()}},"View Contact"),H&&!H[V.chatId]&&r.a.createElement(L.a,{href:"/",onClick:function(e){e.preventDefault(),o(V.chatId)}},"Mute Notifications"),H&&H[V.chatId]&&r.a.createElement(L.a,{href:"/",onClick:function(e){e.preventDefault(),h(V.chatId)}},"Unmute Notifications"),V.chatParticipants.find(function(e){return e.user.userId==ne.userId&&!e.blockedAt})&&r.a.createElement(L.a,{href:"/",onClick:function(e){e.preventDefault(),function(e,t){e.emit(J.BLOCK_CHAT,{chatId:t})}(l,V.chatId)}},"Block Chat"),V.chatParticipants.find(function(e){return e.user.userId==ne.userId&&e.blockedAt})&&r.a.createElement(L.a,{href:"/",onClick:function(e){e.preventDefault(),function(e,t){e.emit(J.UNBLOCK_CHAT,{chatId:t}),console.log("Unblock")}(l,V.chatId)}},"Unblock Chat"),r.a.createElement(L.a,{href:"/",onClick:function(e){e.preventDefault(),function(e,t){e.emit(J.MESSAGES_DELETE,{chatId:t,lastMessageTime:F()().utc()})}(l,V.chatId),he(null)}},"Clear Chat"),r.a.createElement(L.a,{href:"/",onClick:function(e){return e.preventDefault()}},"Report")))))),Oe&&r.a.createElement("div",{className:"emoji-picker-custom d-none d-md-block"},r.a.createElement(te.a,{groupVisibility:!1,onEmojiClick:function(e,t){me("".concat(ue).concat(t.emoji))},disableAutoFocus:!1,native:!0})),r.a.createElement(Me,{onScroll:function(e){return function(e){var t=e.target,a=t.scrollHeight,n=t.scrollTop,c=t.clientHeight;if(t.scrollToBottom,Ne(a-n-c>200),0==n&&ce.length>15&&!W){var r=ce[0]?ce[0].createdAt:F()().utc();ce[0]?he(ce[0].messageId):he(null),V.chatId&&(se(),q(l,V.chatId,r))}}(e)},ref:le,className:"user-chats",options:{wheelPropagation:!1}},Object.keys(V).length>0&&r.a.createElement("div",{className:"chats"},function(){var e=Te?ce.filter(function(e){return e.content.toLowerCase().includes(Te.toLowerCase())}):ce;return r.a.createElement(r.a.Fragment,null,re&&r.a.createElement("div",{className:"text-center"},r.a.createElement(A.a,{size:"lg",color:"primary"})),e.map(function(t,a){return r.a.createElement("div",{key:a,className:f()("chat",{"chat-left":t.user.userId!==ne.userId})},!(a>0&&a<e.length&&F()(e[a-1].createdAt).isSame(t.createdAt,"date"))&&r.a.createElement("div",{className:"text-center m-2",style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(p.a,{size:16}),"\xa0\xa0",F()(t.createdAt).format("DD MMM YYYY")),r.a.createElement("div",null,r.a.createElement("div",{className:"chat-avatar"},r.a.createElement(u.a,{className:"box-shadow-1 cursor-pointer",img:Object(X.p)(t.user.profilePicture),style:{visibility:a<e.length&&a>0&&t.user.userId==e[a-1].user.userId&&F()(e[a-1].createdAt).isSame(t.createdAt,"minute")?"hidden":"visible"}})),r.a.createElement("div",{className:"chat-body"},r.a.createElement("div",{id:t.messageId,key:"msg_"+t.messageId,className:"chat-content ".concat(t.document?"file":"")},r.a.createElement("p",{className:"message-user-name",style:{display:a<e.length&&a>0&&t.user.userId==e[a-1].user.userId&&F()(e[a-1].createdAt).isSame(t.createdAt,"minute")?"none":"block"}},"group"==V.type&&t.user.userId!==ne.userId&&(t.user.name||"").split(" ")[0]),r.a.createElement("p",{onClick:function(){var e;(e=t.document?t.document.name:null)&&window.open(Object(X.o)(e),"_blank")},className:t.document?"cursor-pointer":""},!!t.document&&r.a.createElement(r.a.Fragment,null,Object($.c)(t.document.fileType),"\xa0\xa0"),t.document?r.a.createElement("span",{className:"font-weight-bold "},t.content):Object($.a)(t.content)),t.document&&Object($.d)(t.document.name,t.document.fileType))),a<e.length-1&&a>-1?r.a.createElement(r.a.Fragment,null,t.user.userId==e[a+1].user.userId&&F()(e[a+1].createdAt).isSame(t.createdAt,"minute")?"":r.a.createElement("div",{className:"msg-time"}," ",F()(t.createdAt).format("hh:mm a"))):r.a.createElement("div",{className:"msg-time"}," ",F()(t.createdAt).format("hh:mm a"))))}))}()),ce.length>0&&ce[ce.length-1].user.userId===ne.userId&&r.a.createElement("div",{className:"text-right p-1 msg-delivery-status-container"},r.a.createElement(m.a,{data:V.chatParticipants.filter(function(e){return null!=e.seenAt&&e.user.userId!=ne.userId}).map(function(e){return{title:e.user.name,img:X.e+e.user.profilePicture||"".concat(X.e,"profile-pictures/default.png"),imgWidth:"16",imgHeight:"16",className:"msg-delivery-status"}})}))),r.a.createElement(M.a,{onClick:function(){return we(!0)},color:"gradient-primary",hidden:!be,className:"btn-icon round btn-sm btn-scroll-top-chat"},r.a.createElement("i",{className:"la la-arrow-down"})),Z.filter(function(e){return e.chatId==V.chatId}).length>0&&r.a.createElement("div",{className:"chat-selected-files-container"},r.a.createElement(P.a,{className:"ml-1"},r.a.createElement(G.a,{className:"p-1"},r.a.createElement("div",{className:"chat-selected-files-area"},Z.filter(function(e){return e.chatId==V.chatId}).map(function(e,t){return r.a.createElement("div",{className:"selected-file",key:"selectedFiles_"+e.documentId},r.a.createElement(R.a,{value:e.progress,min:0,max:100,animated:!0}),r.a.createElement("div",null,r.a.createElement("span",{className:"mr-1",id:"doc-name-".concat(e.documentId)},Object(d.f)(e.name)),r.a.createElement(U.a,{placement:"top",target:"doc-name-".concat(e.documentId)},e.name),r.a.createElement("button",{onClick:function(){return Y({documentId:e.documentId})}},r.a.createElement("i",{className:"la la-times"}))))}))))),V.chatParticipants.find(function(e){return e.user.userId==ne.userId&&!e.blockedAt})?r.a.createElement(x.a,{className:"chat-app-form",onSubmit:function(e){return Le(e)}},r.a.createElement(y.a,{className:"input-group-merge mr-1 form-send-message"},r.a.createElement(j.a,{value:ue,onChange:function(e){return me(e.target.value)},placeholder:"Type your message..."}),r.a.createElement(k.a,{addonType:"append"},r.a.createElement(_.a,null,r.a.createElement(z.a,{className:"attachment-icon mb-0",for:"attach-doc"},r.a.createElement("i",{className:"cursor-pointer text-secondary la la-paperclip chat-file"}),r.a.createElement("input",{type:"file",id:"attach-doc",multiple:!0,hidden:!0,onChange:function(e){var t=0;for(var a in e.target.files)if(e.target.files.hasOwnProperty(a)){if(console.log("SELECTED FILE ",e.target.files[a]),Pe(e.target.files[a]),5==t)break;t++}document.getElementById("attach-doc").value=null}}))),r.a.createElement(_.a,{className:"pl-0 d-none d-md-block",onClick:function(){return Se(function(e){return!e})}},r.a.createElement(z.a,{className:"emoji-icon mb-0"},r.a.createElement("i",{className:"cursor-pointer text-secondary la la-grin-alt chat-file"}))))),r.a.createElement(M.a,{className:"send",color:"primary",onClick:Le},r.a.createElement(C.a,{size:14,className:"d-lg-none"}),r.a.createElement("span",{className:"d-none d-lg-block"},"Send"))):r.a.createElement("div",{className:"text-center pt-1"},"You can not reply to this conversation")))},ce=a(27),re=a(307),se=a(212),le=a(475),oe=a(165),ie=function(e){var t=e.sidebar,a=e.handleUserSidebarLeft,s=e.handleSidebar,l=e.userSidebarLeft,o=e.socket,i=e.store,m=i.setNotificationEnabled,E=i.isNotificationEnabled,h=i.selectChat,p=i.selectedChat,b=i.user,N=i.chats,v=i.chatLoading,S=i.updateAbout,C=Object(c.useState)(""),A=Object(n.a)(C,2),T=A[0],D=A[1],w=Object(c.useState)(""),L=Object(n.a)(w,2),M=L[0],P=L[1],G=Object(c.useState)({}),R=Object(n.a)(G,2),U=(R[0],R[1],Object(c.useState)("online")),x=Object(n.a)(U,2),z=x[0],H=x[1],F=Object(c.useState)([]),B=Object(n.a)(F,2),J=B[0],V=B[1];return r.a.createElement("div",{className:"sidebar-left"},r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:f()("chat-profile-sidebar",{show:l})},r.a.createElement("header",{className:"chat-profile-header"},r.a.createElement("div",{className:"close-icon",onClick:a},r.a.createElement(O.a,{size:14})),r.a.createElement("div",{className:"header-profile-sidebar"},r.a.createElement(u.a,{className:"box-shadow-1 avatar-border",img:Object(X.p)(b.profilePicture),status:z,size:"xl"}),r.a.createElement("h4",{className:"chat-user-name"},b.name))),r.a.createElement(g.a,{className:"profile-sidebar-area",options:{wheelPropagation:!1}},r.a.createElement("h6",{className:"section-label mb-1"},"About"),r.a.createElement("div",{className:"about-user"},r.a.createElement(j.a,{rows:"5",defaultValue:b.about,type:"textarea",onBlur:function(e){return function(e){e.preventDefault(),console.log("ABOUT___",e.target.value),S({about:e.target.value})}(e)},onChange:function(e){return D(e.target.value)},className:f()("char-textarea",{"text-danger":T&&T.length>120})}),r.a.createElement("small",{className:"counter-value float-right"},r.a.createElement("span",{className:"char-count"},b.about?b.about.length:0),"/ 120")),r.a.createElement("h6",{className:"section-label mb-1 mt-3"},"Status"),r.a.createElement("ul",{className:"list-unstyled user-status"},r.a.createElement("li",{className:"pb-1"},r.a.createElement(le.a,{type:"radio",className:"custom-control-primary",id:"online",label:"Online",onChange:function(e){return H("online")},checked:"online"===z})),r.a.createElement("li",{className:"pb-1"},r.a.createElement(le.a,{type:"radio",className:"custom-control-danger",id:"busy",label:"Do Not Disturb",onChange:function(e){return H("busy")},checked:"busy"===z})),r.a.createElement("li",{className:"pb-1"},r.a.createElement(le.a,{type:"radio",className:"custom-control-warning",id:"away",label:"Away",onChange:function(e){return H("away")},checked:"away"===z})),r.a.createElement("li",{className:"pb-1"},r.a.createElement(le.a,{type:"radio",className:"custom-control-secondary",id:"offline",label:"Offline",onChange:function(e){return H("offline")},checked:"offline"===z}))),r.a.createElement("h6",{className:"section-label mb-1 mt-2"},"Settings"),r.a.createElement("ul",{className:"list-unstyled"},r.a.createElement("li",{className:"d-flex justify-content-between align-items-center mb-1"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(re.a,{className:"mr-75",size:"18"}),r.a.createElement("span",{className:"align-middle"},"Notification")),r.a.createElement(le.a,{type:"switch",defaultChecked:E,id:"notifications",name:"notifications",label:"",onChange:function(e){console.log(e.target.checked),m(e.target.checked)}}))))),r.a.createElement("div",{className:f()("sidebar-content",{show:!0===t})},r.a.createElement("div",{className:"sidebar-close-icon",onClick:s},r.a.createElement(O.a,{size:14})),r.a.createElement("div",{className:"chat-fixed-search"},r.a.createElement("div",{className:"d-flex align-items-center w-100"},r.a.createElement("div",{className:"sidebar-profile-toggle",onClick:a},Object.keys(b).length?r.a.createElement(u.a,{className:"avatar-border",img:Object(X.p)(b.profilePicture||null),status:z,imgHeight:"42",imgWidth:"42"}):null),r.a.createElement(y.a,{className:"input-group-merge ml-1 w-100"},r.a.createElement(k.a,{addonType:"prepend"},r.a.createElement(_.a,{className:"round"},r.a.createElement(I.a,{className:"text-muted",size:14}))),r.a.createElement(j.a,{value:M,className:"round",placeholder:"Search or start a new chat",onChange:function(e){P(e.target.value);var t=e.target.value||"",a=N.filter(function(e){return e.chatParticipants.find(function(e){return e.user.name.toLowerCase().includes(t.toLowerCase())})||(e.groupName||"").toLowerCase().includes(t.toLowerCase())});V(Object(ce.a)(a))}})))),r.a.createElement(g.a,{className:"chat-user-list-wrapper list-group",options:{wheelPropagation:!1}},r.a.createElement("h4",{className:"chat-list-title"},"Chats"),r.a.createElement("ul",{className:"chat-users-list chat-list media-list"},r.a.createElement(oe.a,{blocking:v},N&&N.length?M.length&&!J.length?r.a.createElement("li",{className:"no-results show"},r.a.createElement("h6",{className:"mb-0"},"No Chats Found")):(M.length&&J.length?J:N).map(function(e){var t=Object(d.d)(e.messages.length>0?e.messages[0].createdAt:new Date);return r.a.createElement("li",{className:e.chatId==p.chatId?"active":"",key:e.chatId,onClick:function(){return function(e,t){h(e),q(t,e.chatId)}(e,o)}},r.a.createElement(u.a,{img:Object(X.p)("group"==e.type?e.groupPicture||null:e.chatParticipants.find(function(e){return e.user.userId!=b.userId}).user.profilePicture),imgHeight:"42",imgWidth:"42",status:e.status}),r.a.createElement("div",{className:"chat-info flex-grow-1"},r.a.createElement("h5",{className:"mb-0"},"group"==e.type?e.groupName:e.chatParticipants.find(function(e){return e.user.userId!=b.userId}).user.name),r.a.createElement(se.a,{className:"text-truncate"},e.messages.length>0?e.messages[0].content:"")),r.a.createElement("div",{className:"chat-meta text-nowrap"},r.a.createElement("small",{className:"float-right mb-25 chat-time ml-25"},t)))}):null))))))},ue=a(203),me=a(204),de=a(887),Ee=a(451),fe=function(e){var t=e.handleUserSidebarRight,a=e.userSidebarRight,n=e.store,s=n.user,l=n.selectedChat,o=n.chatDocuments,i=n.chatDocumentsLoading,m=n.getSelectChatDocuments;Object(c.useEffect)(function(){a&&l.chatId&&m({chatId:l.chatId})},[a]);return Object.keys(l).length>0&&r.a.createElement("div",{className:f()("user-profile-sidebar",{show:!0===a})},r.a.createElement("header",{className:"user-profile-header"},r.a.createElement("span",{className:"close-icon",onClick:t},r.a.createElement(O.a,{size:14})),r.a.createElement("div",{className:"header-profile-sidebar"},r.a.createElement(u.a,{className:"box-shadow-1 avatar-border",size:"xl",img:Object(X.p)("group"==l.type?l.groupPicture||null:l.chatParticipants.find(function(e){return e.user.userId!=s.userId}).user.profilePicture),imgHeight:"70",imgWidth:"70"}),r.a.createElement("h4",{className:"chat-user-name"}," ","group"==l.type?l.groupName:l.chatParticipants.find(function(e){return e.user.userId!=s.userId}).user.name))),r.a.createElement(g.a,{className:"user-profile-sidebar-area",options:{wheelPropagation:!1}},"group"!=l.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:"section-label mb-1"},"About"),r.a.createElement("p",null,l.chatParticipants.find(function(e){return e.user.userId!=s.userId}).user.about||"These aren\u2019t the droids you\u2019re looking for!")),r.a.createElement("div",{className:"personal-info"},"group"==l.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:"section-label mb-1 mt-3"},"Group Information"),r.a.createElement("ul",{className:"list-unstyled"},l.chatParticipants.filter(function(e){return e.user.userId!=s.userId}).map(function(e){return r.a.createElement("li",{className:"mb-1",key:e.user.userId},r.a.createElement("div",null,r.a.createElement(u.a,{img:Object(X.p)(e.user.profilePicture)}),r.a.createElement("span",{className:"pl-1"},e.user.name)))})))),r.a.createElement("div",{className:"more-options"},r.a.createElement("h6",{className:"section-label mb-1 mt-3"},"Shared Media"),r.a.createElement(oe.a,{blocking:!!i},r.a.createElement("ul",{className:"list-unstyled"},0==o.length&&!i&&r.a.createElement("li",{className:"cursor-pointer mb-1"},"No Media found"),o.length>0&&o.map(function(e,t){return r.a.createElement("li",{key:"doc_list_"+t,className:"cursor-pointer mb-1"},r.a.createElement(ue.a,{className:"shared-media-item"},r.a.createElement(me.a,{lg:"1"},Object($.c)(e.fileType)),r.a.createElement(me.a,{lg:"9"},r.a.createElement("span",{id:"chat-media-".concat(e.documentId),className:"ml-1"},Object(d.f)(e.fileName)),r.a.createElement(U.a,{placement:"top",target:"chat-media-".concat(e.documentId)},e.fileName)),r.a.createElement(me.a,{lg:"1",className:"download-btn"},r.a.createElement(de.a,{size:16,onClick:function(){return Object(Ee.saveAs)(Object(X.o)(e.name),e.fileName)}}))))}))))))},he=(a(888),a(62)),ge=a(33),pe=(a(566),a(567),a(172));function be(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Ne(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ne(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,c=function(){};return{s:c,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){l=!0,r=e},f:function(){try{s||null==a.return||a.return()}finally{if(l)throw r}}}}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var ve=a(889);t.default=Object(pe.j)(Object(he.b)(function(e){var t=e.Chat;return{error:t.error,user:t.user,chats:t.chats,chatError:t.chatError,authError:t.authError,isAuthorized:t.isAuthorized,isRoomJoined:t.isRoomJoined,selectedChat:t.selectedChat,selectedUser:t.selectedUser,messages:t.messages,isNotification:t.isNotification,isEndOfMessages:t.isEndOfMessages,mutedNotificationIds:t.mutedNotificationIds,isNotificationEnabled:t.isNotificationEnabled,documentList:t.documentList,uploadedDocuments:t.uploadedDocuments,chatDocuments:t.chatDocuments,chatDocumentsLoading:t.chatDocumentsLoading,chatLoading:t.chatLoading,aboutUpdating:t.aboutUpdating,messagesLoading:t.messagesLoading}},{setLoggedUser:ge.t,getChatContacts:ge.f,authorizedSuccess:ge.c,authorizedFailure:ge.b,saveNewMessage:ge.r,setRoomJoined:ge.x,selectChat:ge.s,updateSelectChat:ge.G,getPreviousMessagesSuccess:ge.j,getPreviousMessagesFailure:ge.i,newMessage:ge.o,updateChatHeadMessage:ge.D,updateChatParticipants:ge.E,deleteMessages:ge.e,playNotificationSound:ge.p,stopNotificationSound:ge.y,setNotificationEnabled:ge.u,setNotificationIds:ge.v,muteChatNotification:ge.n,unmuteChatNotification:ge.z,uploadDocument:ge.H,addDocumentToQueue:ge.a,cancelDocumentUpload:ge.d,updateDocumentProgress:ge.F,removeDocument:ge.q,getSelectChatDocuments:ge.k,getSelectChatDocumentsSuccess:ge.m,getSelectChatDocumentsFailure:ge.l,updateAbout:ge.A,updateAboutSuccess:ge.C,updateAboutFailure:ge.B,setPreviousMessagesLoading:ge.w})(function(e){Object(he.d)(function(e){return e.Chat});var t=Object(c.useState)({}),a=Object(n.a)(t,2),s=(a[0],a[1]),o=Object(c.useState)(!1),i=Object(n.a)(o,2),u=i[0],m=i[1],d=Object(c.useState)(!1),E=Object(n.a)(d,2),h=E[0],g=E[1],p=Object(c.useState)(!1),b=Object(n.a)(p,2),N=b[0],v=b[1],I=function(){return m(!u)},O=function(){return g(!h)};return Object(c.useEffect)(function(){e.setLoggedUser(Object(V.n)()||{}),function(e,t){e.on(J.CONNECT,function(){console.log(J.CONNECT),e.emit(J.SET_LANGUAGE,{locale:"en"});var t=Object(K.a)().Authorization;e.emit(J.AUTHORIZATION,{authorization:t})}),e.on(J.AUTHORIZATION,function(e){if(console.log(J.AUTHORIZATION,e),e.success){var a=Object(V.n)()||{};t.getChatContacts(a.userId),t.authorizedSuccess()}else t.authorizedFailure()}),e.on(J.JOIN_ROOM,function(e){console.log(J.JOIN_ROOM,e)}),e.on(J.GET_PREVIOUS_MESSAGES,function(e){console.log(J.GET_PREVIOUS_MESSAGES,e),e.success?t.getPreviousMessagesSuccess(e.data):t.getPreviousMessagesFailure(e.error)}),e.on(J.NEW_MESSAGE,function(e){return Y(J.NEW_MESSAGE,e,t)}),e.on(J.MESSAGES_DELIVERED,function(e){return W(J.MESSAGES_DELIVERED,e,t)}),e.on(J.MESSAGES_SEEN,function(e){return W(J.MESSAGES_SEEN,e,t)}),e.on(J.BLOCK_CHAT,function(e){return Z(J.BLOCK_CHAT,e,t)}),e.on(J.UNBLOCK_CHAT,function(e){return Z(J.UNBLOCK_CHAT,e,t)}),e.on(J.MESSAGES_DELETE,function(e){console.log(J.MESSAGES_DELETE,e),e.success&&t.deleteMessages(e.data)})}(l,e),e.setNotificationIds(Object($.b)())},[]),Object(c.useEffect)(function(){if(!e.isRoomJoined){var t,a=be(e.chats);try{for(a.s();!(t=a.n()).done;){var n=t.value;l.emit(J.JOIN_ROOM,{chatId:n.chatId})}}catch(c){a.e(c)}finally{a.f()}e.setRoomJoined()}},[e.chats]),Object(c.useEffect)(function(){e.isNotification&&setTimeout(function(){e.stopNotificationSound()},1e3)},[e.isNotification]),Object(c.useEffect)(function(){var t,a=be(e.uploadedDocuments);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.data&&(e.removeDocument({documentId:n.documentId}),Q({socket:l,message:n.name,chatId:n.chatId,documentId:n.data.documentId}))}}catch(c){a.e(c)}finally{a.f()}},[e.uploadedDocuments]),r.a.createElement(c.Fragment,null,r.a.createElement(ie,{socket:l,store:e,sidebar:u,handleSidebar:I,userSidebarLeft:N,handleUserSidebarLeft:function(){return v(!N)}}),r.a.createElement("div",{className:"content-right"},r.a.createElement("div",{className:"content-wrapper"},r.a.createElement("div",{className:"content-body"},r.a.createElement("div",{className:f()("body-content-overlay",{show:!0===h||!0===u||!0===N}),onClick:function(){m(!1),g(!1),v(!1)}}),r.a.createElement(ne,{socket:l,store:e,handleUser:function(e){return s(e)},handleSidebar:I,userSidebarLeft:N,handleUserSidebarRight:O}),r.a.createElement(fe,{store:e,userSidebarRight:h,handleUserSidebarRight:O})))),e.isNotification&&r.a.createElement("audio",{src:ve,autoPlay:!0,style:{visibility:"hidden"}}))}))},389:function(e,t,a){"use strict";var n=a(46),c=a(0),r=a.n(c),s=a(60),l=a.n(s),o=a(504),i=a(175);t.a=function(e){var t=e.data,a=e.tag,s=e.className,u=a||"div";return r.a.createElement(u,{className:l()("avatar-group",Object(n.a)({},s,s))},t.map(function(e,t){var a=e.tag?e.tag:"div";return r.a.createElement(c.Fragment,{key:t},e.title?r.a.createElement(o.a,{placement:e.placement,target:e.title.split(" ").join("-")},e.title):null,e.meta?null:r.a.createElement(i.a,Object.assign({tag:a,className:l()("pull-up",Object(n.a)({},e.className,e.className))},e.title?{id:e.title.split(" ").join("-")}:{},{title:void 0,meta:void 0},e)),e.meta?r.a.createElement(a,{className:"d-flex align-items-center pl-1"},e.meta):null)}))}},888:function(e,t,a){},889:function(e,t,a){e.exports=a.p+"static/media/notification.4355078f.mp3"}}]);
//# sourceMappingURL=39.e4de4525.chunk.js.map
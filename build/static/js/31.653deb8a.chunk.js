(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1159:function(e,t,n){"use strict";n.r(t);var s=n(27),a=n(39),c=n(0),r=n.n(c),l=(n(60),n(275)),o=n(198),i=n(199),m=n(276),u=n(356),d=n(203),g=n(204),E=n(253),f=n(252),p=n(287),h=n(217),L=n(156),b=n(229),v=n(475),N=n(481),y=n(503),w=n(350),k=n(323),O=n(62),j=n(20),T=n(172),x=(n(301),n(456)),U=n.n(x),A=n(40),C=n(175),S=n(896),z=n(1160),F=n(565),R=n(1130),D=n(245),I=n(1140),P=n(261),M=n(165),B=n(12),_=n(170),J=n(297),V=n(298),G=n(302);t.default=Object(T.j)(Object(O.b)(function(e){var t=e.Lessons;return{topics:t.topics,topicsLoading:t.topicsLoading,topicsError:t.topicsError,lessons:t.lessons,lessonsLoading:t.lessonsLoading,lessonsError:t.lessonsError,selectedTopic:t.selectedTopic,selectedLesson:t.selectedLesson,oneLessonLoading:t.oneLessonLoading,oneLessonError:t.oneLessonError,students:t.students,studentsError:t.studentsError,studentsLoading:t.studentsLoading,studentsLessonAssignLoading:t.studentsLessonAssignLoading,studentsLessonAssignError:t.studentsLessonAssignError,studentsLessonUnassignLoading:t.studentsLessonUnassignLoading,studentsLessonUnassignError:t.studentsLessonUnassignError}},{getTeacherTopicLessons:j.s,getTeacherTopics:j.v,selectTopic:j.z,selectLesson:j.y,getLesson:j.j,getStudentsForLesson:j.m,assignLessonToStudents:j.g,unassignLessonToStudents:j.A})(function(e){var t=r.a.createRef(),n=r.a.createRef(),O=Object(c.useState)(!1),j=Object(a.a)(O,2),T=j[0],x=j[1],H=Object(c.useState)(!1),W=Object(a.a)(H,2),Y=W[0],q=W[1],K=Object(c.useState)(!1),Q=Object(a.a)(K,2),X=Q[0],Z=Q[1],$=Object(c.useState)(!1),ee=Object(a.a)($,2),te=ee[0],ne=ee[1],se=Object(c.useState)(!1),ae=Object(a.a)(se,2),ce=ae[0],re=ae[1],le=Object(c.useState)(""),oe=Object(a.a)(le,2),ie=oe[0],me=oe[1],ue=Object(c.useState)([]),de=Object(a.a)(ue,2),ge=de[0],Ee=de[1],fe=Object(c.useState)([]),pe=Object(a.a)(fe,2),he=pe[0],Le=pe[1],be=function(){return Z(!X)},ve=function(){return q(!Y)};Object(c.useEffect)(function(){e.selectedTopic?(e.getTeacherTopicLessons(e.selectedTopic),e.getStudentsForLesson(),Z(!1)):e.history.goBack()},[e.selectedTopic]),Object(c.useEffect)(function(){!te||e.studentsLessonAssignLoading||e.studentsLessonAssignError?te&&!e.studentsLessonAssignLoading&&e.studentsLessonAssignError&&Object(G.a)("Lesson Access",e.studentsLessonAssignError):(ne(!1),Ee([]),Object(G.b)("Lesson Access","Lesson access granted successfully"))},[e.studentsLessonAssignLoading]),Object(c.useEffect)(function(){!ce||e.studentsLessonUnassignLoading||e.studentsLessonUnassignError?ce&&!e.studentsLessonUnassignLoading&&e.studentsLessonUnassignError&&Object(G.a)("Lesson Access",e.studentsLessonUnassignError):(re(!1),Le([]),Object(G.b)("Lesson Access","Lesson access revoked successfully"))},[e.studentsLessonUnassignLoading]),Object(c.useEffect)(function(){if(Ee([]),Le([]),Z(!1),e.selectedLesson){var t=e.lessons.find(function(t){return t.id==e.selectedLesson});t&&!t.isFull&&e.getLesson(e.selectedLesson)}},[e.selectedLesson]),Object(c.useEffect)(function(){e.lessons.length>0&&!e.selectedLesson?e.selectLesson(e.lessons[0].id):e.lessons.length>0&&e.selectedLesson&&e.getLesson(e.selectedLesson)},[e.lessons]);var Ne=function(){var t=e.lessons.find(function(t){return t.id==e.selectedLesson});if(!t)return[];if(!t.isFull)return[];var n=[];return e.students.forEach(function(e){var s=!1;t.studentLessons.forEach(function(t){e.user.userId==t.infonowUser.infonowUserUuid&&(s=!0)}),s||n.push(e)}),n};return r.a.createElement(r.a.Fragment,null,e.selectedTopic&&r.a.createElement(c.Fragment,null,r.a.createElement(M.a,{blocking:e.lessonsLoading||e.studentsLessonUnassignLoading},r.a.createElement(l.a,{className:"full-height"},r.a.createElement(m.a,{className:"p-0"},!e.lessonsLoading&&e.lessonsError&&r.a.createElement(V.a,{title:"Error",message:e.lessonsError}),!e.lessonsLoading&&!e.lessonsError&&r.a.createElement(d.a,null,!T&&r.a.createElement(g.a,{lg:3,sm:"12",md:"12",className:"pr-lg-0 topic-list-shadow"},T?r.a.createElement(I.a,{className:"ml-2 mt-2",width:20,height:20,onClick:function(){return x(!1)}}):r.a.createElement(y.a,{expand:"lg",className:"p-0"},!Y&&r.a.createElement(I.a,{className:"m-2 d-md-block d-lg-none",width:20,height:20,onClick:ve}),Y&&r.a.createElement(R.a,{className:"m-2 d-md-block d-lg-none",width:20,height:20,onClick:ve}),r.a.createElement(u.a,{isOpen:Y||T,navbar:!0},r.a.createElement(l.a,{className:"full-width"},r.a.createElement(o.a,null,r.a.createElement("div",{className:"d-flex align-items-center mb-1"},r.a.createElement("div",{className:"d-none d-lg-inline d-xl-inline"},r.a.createElement(L.a.Ripple,{className:"btn-block btn-icon",color:"flat-primary",onClick:function(){e.history.goBack()}},r.a.createElement(P.a,{size:14}))),r.a.createElement("h6",{className:"ml-25 mb-0"},e.topics.find(function(t){return t.id==e.selectedTopic}).title)),r.a.createElement("div",{className:"d-flex w-100 align-items-center justify-content-between"},r.a.createElement("h4",{className:"text-primary ml-25 mb-0"},"Lessons"),r.a.createElement("div",null,r.a.createElement(L.a.Ripple,{className:"btn-block btn-icon",color:"primary",onClick:function(){e.history.push("/new-lesson")}},r.a.createElement(D.a,{size:14}))))),r.a.createElement(m.a,{className:"p-0"},0==e.lessons.length&&!e.lessonsLoading&&!e.lessonsError&&r.a.createElement(J.a,{message:"Add new Lesson",width:100,height:100}),e.lessons.length>0&&r.a.createElement("div",{className:"lesson-list"},e.lessons.map(function(t,n){return r.a.createElement("div",{key:"lesson-key-"+n,className:"lesson-container ".concat(t.id==e.selectedLesson?"active":""),onClick:function(){e.selectLesson(t.id),Y&&q(!1)}},r.a.createElement("div",{className:"lesson-content"},t.title))}))))))),r.a.createElement(g.a,{lg:"9",md:"12",sm:"12"},function(){var a=e.lessons.find(function(t){return t.id==e.selectedLesson});if(a)return r.a.createElement(M.a,{blocking:e.oneLessonLoading},a&&r.a.createElement(l.a,{className:"active-lesson-container ".concat(X?"hide":""," ").concat(T?"active":"")},r.a.createElement(o.a,null,r.a.createElement(i.a,null,a.title)),r.a.createElement(m.a,null,r.a.createElement("div",{ref:t,className:"active-lesson"},a.videoUrl&&r.a.createElement("div",{className:"lesson-video mt-2"},r.a.createElement("iframe",{src:a.videoUrl,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),r.a.createElement("div",{ref:n,id:"active-lesson-content",className:a.videoUrl?"mt-4":""},e.oneLessonError&&r.a.createElement(V.a,null)),a.content&&function(e){if(e){var s=String(e).replaceAll("/uploads/","http://192.168.10.102:1337/uploads/");setTimeout(function e(){n.current?(Object(A.render)(r.a.createElement(U.a,null,s),n.current),window.scrollTo(0,0),t.current.scrollTo(0,0)):setTimeout(e,100)},200)}}(a.content)))),a.studentLessons&&r.a.createElement("div",{className:"students ".concat(X?"active":"m-2")},r.a.createElement("div",{className:"heading",onClick:be},r.a.createElement("h4",null,"Students"),r.a.createElement("div",null,X?r.a.createElement(S.a,{size:20}):r.a.createElement(z.a,{size:20}))),X&&r.a.createElement(u.a,{isOpen:X},r.a.createElement("div",{className:"student-list"},r.a.createElement(d.a,null,r.a.createElement(g.a,{sm:"12",md:"7",lg:"8"},r.a.createElement(E.a,{className:"input-group-merge"},r.a.createElement(f.a,{placeholder:"Search here",value:ie,onChange:function(e){return me(e.target.value)}}),r.a.createElement(p.a,{addonType:"append"},r.a.createElement(h.a,null,!ie&&r.a.createElement(F.a,{size:14}),ie&&r.a.createElement(R.a,{size:14,onClick:function(){return me("")}}))))),r.a.createElement(g.a,{sm:"12",md:"5",lg:"4"},r.a.createElement("div",{className:"text-right mt-1 mt-md-0"},r.a.createElement(L.a.Ripple,{color:"primary",onClick:function(){return ne(!0)}},r.a.createElement(D.a,{size:14}),"\xa0 Grant Access")))),0==a.studentLessons.length&&r.a.createElement(J.a,{message:"This Lesson is not Assigned to any student"}),a.studentLessons.length>0&&r.a.createElement(b.a,{key:"lesson-student-table",className:"mt-2",responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Student"),r.a.createElement("th",null,"Progress"),r.a.createElement("th",null,"Date"))),r.a.createElement("tbody",null,function(e){if(!ie)return e;var t=[];return e.forEach(function(e){e.infonowUser.name.toLowerCase().includes(ie.toLowerCase())&&t.push(e)}),t}(a.studentLessons).map(function(e,t){return r.a.createElement("tr",{key:"filter-student"+t},r.a.createElement("td",null,r.a.createElement(v.a,{type:"checkbox",className:"custom-control-Primary",id:"filter-student"+t,inline:!0,onClick:function(){return function(e){if(he.find(function(t){return t==e}))return Le(he.filter(function(t){return t!=e}));Le([].concat(Object(s.a)(he),[e]))}(e.infonowUser.infonowUserUuid)}})),r.a.createElement("td",null,r.a.createElement(C.a,{className:"box-shadow-1 avatar-border",size:"sm",img:Object(B.p)(e.infonowUser.profilePicture),imgHeight:"70",imgWidth:"70"}),"\xa0\xa0",r.a.createElement("span",null,e.infonowUser.name)),r.a.createElement("td",null,e.isCompleted?r.a.createElement(N.a,{pill:!0,color:"light-success",className:"mr-1"},"Completed"):r.a.createElement(N.a,{pill:!0,color:"light-warning",className:"mr-1"},"InComplete")),r.a.createElement("td",null,r.a.createElement(_.a,{dateTime:e.created_at})))}))),he.length>0&&r.a.createElement("div",{className:"mt-2"},r.a.createElement(L.a.Ripple,{color:"primary",onClick:function(){return re(!0),void e.unassignLessonToStudents({lessonId:e.selectedLesson,studentIds:he})}},"Revoke Access"))))))}()))))),r.a.createElement(w.a,{isOpen:te,className:"modal-dialog-centered"},r.a.createElement(M.a,{blocking:e.studentsLessonAssignLoading,className:"model-loader"},r.a.createElement(k.a,{className:"pb-1"},r.a.createElement("div",{className:"text-right"},r.a.createElement(R.a,{size:16,onClick:function(){ne(!1),Ee([])}})),r.a.createElement("h4",null,"Select a student"),0==Ne().length&&r.a.createElement(J.a,{message:"No Student Left"}),r.a.createElement(d.a,{className:"mt-1"},Ne().map(function(e,t){return r.a.createElement(g.a,{key:"lesson-assign-"+t,lg:"12",className:"mb-25 p-1 student-bottom-border"},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("div",null,r.a.createElement(C.a,{className:"box-shadow-1 avatar-border",size:"sm",img:Object(B.p)(e.user.profilePicture)}),"\xa0\xa0",r.a.createElement("span",null,e.user.name)),r.a.createElement(v.a,{type:"checkbox",className:"custom-control-Primary",id:"lesson-assign-"+t,inline:!0,onClick:function(){return function(e){if(ge.find(function(t){return t==e}))return Ee(ge.filter(function(t){return t!=e}));Ee([].concat(Object(s.a)(ge),[e]))}(e.user.userId)}})))})),ge.length>0&&r.a.createElement("div",{className:"text-right"},r.a.createElement(L.a.Ripple,{color:"primary",className:"mt-2",onClick:function(){e.assignLessonToStudents({lessonId:e.selectedLesson,studentIds:ge})}},"Apply")))))))}))},165:function(e,t,n){"use strict";var s=n(46),a=n(0),c=n.n(a),r=n(60),l=n.n(r),o=n(201),i=(n(169),function(e){var t,n=e.children,r=e.blocking,o=e.loader,i=e.className,m=e.tag,u=e.overlayColor,d=m;return c.a.createElement(d,{className:l()("ui-loader",(t={},Object(s.a)(t,i,i),Object(s.a)(t,"show",r),t))},n,r?c.a.createElement(a.Fragment,null,c.a.createElement("div",Object.assign({className:"overlay"},r&&u?{style:{backgroundColor:u}}:{})),c.a.createElement("div",{className:"loader"},o)):null)});t.a=i,i.defaultProps={tag:"div",blocking:!1,loader:c.a.createElement(o.a,{color:"primary"})}},169:function(e,t,n){},170:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var s=n(0),a=n.n(s),c=n(173),r=n.n(c),l=n(64),o=n.n(l),i=function(e){var t="DD/MM/yyyy hh:mmA";return e.type&&("date"===e.type&&(t="DD/MM/yyyy"),"time"===e.type&&(t="hh:mmA")),a.a.createElement(a.a.Fragment,null,e.dateTime?r.a.utc(e.dateTime).local().format(e.format||t):e.invalidValueText)};i.propTypes={dateTime:o.a.string,invalidValueText:o.a.string}},202:function(e,t,n){var s={"./no-network.png":241,"./not-found.png":242,"./upcoming-meeting-dark.svg":243,"./upcoming-meeting.svg":244};function a(e){var t=c(e);return n(t)}function c(e){var t=s[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(s)},a.resolve=c,e.exports=a,a.id=202},241:function(e,t,n){e.exports=n.p+"static/media/no-network.dfb8ec30.png"},242:function(e,t,n){e.exports=n.p+"static/media/not-found.8a74951b.png"},243:function(e,t,n){e.exports=n.p+"static/media/upcoming-meeting-dark.322f4bf9.svg"},244:function(e,t,n){e.exports=n.p+"static/media/upcoming-meeting.0a043dcb.svg"},297:function(e,t,n){"use strict";var s=n(39),a=n(0),c=n.n(a),r=n(188);t.a=function(e){var t=Object(r.a)(),a=Object(s.a)(t,2),l=(a[0],a[1],n(202)("./".concat("not-found.png")));return c.a.createElement("div",{className:"text-center pt-2 pb-2"},c.a.createElement("h6",null,e.title),c.a.createElement("img",{className:"mt-25",src:l,style:{width:e.width?e.width:200,height:e.height?e.height:200}}),c.a.createElement("div",{className:"mt-25 text-muted"},e.message))}},298:function(e,t,n){"use strict";var s=n(39),a=n(0),c=n.n(a),r=n(188);t.a=function(e){var t=Object(r.a)(),a=Object(s.a)(t,2),l=(a[0],a[1],n(202)("./".concat("no-network.png")));return c.a.createElement("div",{className:"text-center pt-2"},c.a.createElement("h6",null,e.title),c.a.createElement("img",{src:l,className:"mt-25",style:{width:e.width?e.width:200,height:e.height?e.height:200}}),c.a.createElement("div",{className:"mt-25 text-muted"},e.message))}},301:function(e,t,n){},302:function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return g});var s=n(0),a=n.n(s),c=n(307),r=n(175),l=n(67),o=n(173),i=n.n(o),m=function(e,t,n,o){return Object(l.b)(a.a.createElement(s.Fragment,null,a.a.createElement("div",{className:"toastify-header"},a.a.createElement("div",{className:"title-wrapper mr-1"},a.a.createElement(r.a,{size:"sm",color:o,icon:a.a.createElement(c.a,{size:12})}),a.a.createElement("h6",{className:"toast-title text-".concat(o)},e||"Notification")),a.a.createElement("small",{className:"text-muted"},i()().format("hh:mm a"))),a.a.createElement("div",{className:"toastify-body"},a.a.createElement("span",{role:"img","aria-label":"toast-text"},t))),{hideProgressBar:n})},u=function(e,t,n){var s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];switch(e){case"success":m(t,n,s,"success");break;case"info":m(t,n,s,"info");break;case"error":m(t,n,s,"danger");break;case"warning":m(t,n,s,"warning");break;default:m(t,n,s,"primary")}},d=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];u("success",e,t,n)},g=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];u("error",e,t,n)}}}]);
//# sourceMappingURL=31.653deb8a.chunk.js.map